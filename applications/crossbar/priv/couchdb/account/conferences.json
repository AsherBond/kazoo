{
    "_id": "_design/conferences"
    ,"language": "javascript"
    ,"views": {
        "crossbar_listing": {
            "map": "function(doc) { if (doc.pvt_type != 'conference' || doc.pvt_deleted) return; emit(doc._id, {'id': doc._id, 'name': doc.name, 'owner_id': doc.owner_id, 'start': doc.start || 0,'pins': doc.pins || {}}); }"
        },
        "listing_by_name": {
            "map": "function(doc) { if (doc.pvt_type != 'conference' || doc.pvt_deleted) return; emit(doc.name, null);}"
        },
        "listing_by_pin": {
            "map": "function(doc) { if (doc.pvt_type != 'conference' || doc.pvt_deleted) return; if(doc.participants){ for(p in doc.participants){ emit(doc.participants[p].pin, doc.participants[p]); }} if(doc.pins){ for(p in doc.pins){  if(p == 'moderator') {emit(doc.pins[p], {moderator: true});} else {emit(doc.pins[p], {moderator: false});} }}}"
        }
    }
    ,"filters": {
        "export":"function(doc, req) { return ( doc.pvt_type == 'conference' ); }"
    }
}
