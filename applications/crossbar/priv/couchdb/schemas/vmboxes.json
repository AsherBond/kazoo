{
   "_id": "vmboxes",
   "$schema": "http://json-schema.org/draft-04/schema#",
   "id": "http://json-schema.org/draft-03/schema#",
   "description": "Schema for a voicemail box",
   "type": "object",
   "required": true,
   "properties": {
       "require_pin": {
           "type": "boolean",
           "required": false,
           "description": "Determines if a pin is required to check the voicemail from the users devices",
           "default": false
       },
       "check_if_owner": {
           "type": "boolean",
           "required": false,
           "description": "Determines if when the user calls their own voicemail they should be prompted to sign in",
           "default": true
       },
       "pin": {
           "type": "string",
           "required": false,
           "description": "The pin number for the voicemail box",
           "minLength": 4,
           "maxLength": 6
       },
       "media": {
           "type": "object",
           "required": false,
           "description": "The media (prompt) parameters",
           "default": {
           },
           "properties": {
               "unavailable": {
                   "type": "string",
                   "required": false,
                   "description": "The ID of a media object that should be used as the unavailable greeting",
                   "minLength": 32,
                   "maxLength": 32
               }
           }
       },
       "name": {
           "type": "string",
           "required": true,
           "description": "A friendly name for the voicemail box",
           "minLength": 1,
           "maxLength": 128
       },
       "mailbox": {
           "type": "string",
           "required": true,
           "description": "The voicemail box number",
           "minLength": 2,
           "maxLength": 6
       },
       "owner_id": {
           "type": "string",
           "required": false,
           "description": "The ID of the user object that 'owns' the voicemail box",
           "minLength": 32,
           "maxLength": 32
       },
       "timezone": {
           "type": "string",
           "required": false
       },
       "is_setup": {
           "type": "boolean",
           "required": false,
           "description": "Determines if the user has completed the initial configuration",
           "default": false
       },
       "skip_greeting": {
           "type": "boolean",
           "required": false,
           "description": "Determines if the greeting should be skipped",
           "default": false
       },
       "skip_instructions": {
           "type": "boolean",
           "required": false,
           "description": "Determines if the instructions after the greeting and prior to composing a message should be played",
           "default": false
       },
       "delete_after_notify": {
           "type": "boolean",
           "required": false,
           "description": "Delete the voicemail after the notification has been sent",
           "warning": "Voicemail is not stored in the database if this option is selected",
           "default": false
       },
       "notifications": {
           "type": "object",
           "required": false,
           "default": {
           },
           "properties": {
               "voicemail_to_email": {
                   "type": "object",
                   "required": false,
                   "properties": {
                       "email_text_template": {
                           "type": "string",
                           "required": false,
                           "description": "The email html body template.  Has access to an acccount, service, and voicemail object"
                       },
                       "email_html_template": {
                           "type": "string",
                           "required": false,
                           "description": "The email text body template.  Has access to an acccount, service, and voicemail object"
                       },
                       "email_subject_template": {
                           "type": "string",
                           "required": false,
                           "description": "The email subject template.  Has access to an acccount, service, and voicemail object"
                       },
                       "support_number": {
                           "type": "string",
                           "required": false,
                           "description": "The support number provided to the templates",
                           "maxLength": 128
                       },
                       "support_email": {
                           "type": "string",
                           "required": false,
                           "description": "The support email provided to the templates",
                           "maxLength": 256
                       },
                       "service_url": {
                           "type": "string",
                           "required": false,
                           "description": "The support number provided to the templates",
                           "maxLength": 128
                       },
                       "service_name": {
                           "type": "string",
                           "required": false,
                           "description": "The service name provided",
                           "maxLength": 128
                       },
                       "service_provider": {
                           "type": "string",
                           "required": false,
                           "description": "The service provider name",
                           "maxLength": 128
                       },
                       "send_from": {
                           "type": "string",
                           "required": false,
                           "description": "The from address used when sending the email",
                           "maxLength": 256
                       }
                   }
               }
           }
       },
       "messages": {
           "type": "array",
           "required": false,
           "description": "The messages that have been left in the voicemail box",
           "default": [
           ],
           "items": {
               "type": "object",
               "required": false,
               "properties": {
                   "timestamp": {
                       "type": "integer",
                       "required": false,
                       "description": "The UTC timestamp, in gregorian seconds, that the voicemail was left on"
                   },
                   "from": {
                       "type": "string",
                       "required": false,
                       "description": "The SIP from header"
                   },
                   "to": {
                       "type": "string",
                       "required": false,
                       "description": "The SIP to header"
                   },
                   "caller_id_number": {
                       "type": "string",
                       "required": false,
                       "description": "The reported caller id number",
                       "maxLength": 15
                   },
                   "caller_id_name": {
                       "type": "string",
                       "required": false,
                       "description": "The reported caller id name",
                       "maxLength": 15
                   },
                   "call_id": {
                       "type": "string",
                       "required": false,
                       "description": "The SIP call-id"
                   },
                   "folder": {
                       "type": "string",
                       "required": false,
                       "description": "The folder the message belongs to",
                       "enum": [
                           "deleted",
                           "saved",
                           "new"
                       ]
                   },
                   "length": {
                       "type": "integer",
                       "required": false
                   },
                   "media_id": {
                       "type": "string",
                       "required": false,
                       "description": "The ID of the message media object",
                       "minLength": 32,
                       "maxLength": 32
                   }
               }
           }
       }
   }
}
